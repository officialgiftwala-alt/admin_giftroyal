<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="loader.css">
<style>
  * {
    overflow-x: hidden;
  }
</style>
<div class="layout">
  <aside id="sidebar" class="sidebar"></aside>
  <main class="main">
    <header class="topbar">
      <button id="menuToggle" class="menu-btn" aria-label="Open sidebar">
        <svg width="24" height="24" viewBox="0 0 24 24"><path d="M4 6h10M4 12h16M4 18h8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
      <h1>Users</h1>
    </header>
    <div class="content">
      <div id="loader">Loading...</div>
      <div class="card">
        <div class="table-wrap">
          <table id="userTable" class="table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Profile</th>
                <th>Coins</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>
  </main>
</div>
<script src="sidebar.js"></script>
<script>
const DEPLOY_URL="https://script.google.com/macros/s/AKfycbyzWn_N5_qiRxv6kQIujaB6FXeZg1g40XHV9DcguyxpismYL88WQy0kSbIw5VgKOP05Tw/exec";
function showLoader(show){document.getElementById("loader").style.display=show?"block":"none"}
function loadUsers(){
  const tbody=document.querySelector("#userTable tbody");
  tbody.innerHTML="";
  fetch(DEPLOY_URL+"?type=users").then(r=>r.json()).then(data=>{
    data.forEach(u=>{
      let tr=document.createElement("tr");tr.className="fade-in";
      let td2=document.createElement("td");td2.textContent=u.name;
      let td3=document.createElement("td");td3.textContent=u.email;
      let td4=document.createElement("td");let img=document.createElement("img");img.src=u.profile;img.width=40;img.height=40;img.style.borderRadius="8px";td4.appendChild(img);
      let td5=document.createElement("td");td5.textContent=u.coins;
      tr.appendChild(td2);tr.appendChild(td3);tr.appendChild(td4);tr.appendChild(td5);
      tbody.appendChild(tr);
    });
    showLoader(false);
  });
}
loadUsers();
</script>
